{
  "agent_configuration": {
    "name": "refresh_studio_booking_agent",
    "version": "2.0",
    "description": "Enhanced AI agent for Refresh Studio booking system with Slovak language support and advanced scheduling capabilities",
    "primary_language": "Slovak",
    "fallback_language": "English"
  },
  
  "endpoints": {
    "primary_webhook": {
      "url": "/api/booking/webhook/elevenlabs-unified",
      "method": "POST",
      "description": "Main unified endpoint for all booking operations",
      "supports_actions": [
        "get_available_times",
        "get_soonest_available", 
        "get_earlier_times",
        "get_services",
        "book_appointment",
        "cancel_appointment"
      ]
    },
    
    "specialized_endpoints": {
      "soonest_available": "/api/booking/webhook/elevenlabs-soonest-available",
      "available_times": "/api/booking/webhook/elevenlabs-available-times", 
      "book_appointment": "/api/booking/webhook/elevenlabs-book-appointment",
      "technical_webhook": "/api/booking/webhook/soonest-available"
    }
  },

  "tools": [
    {
      "name": "check_availability", 
      "description": "Check available appointment times for specific dates or periods with validation",
      "parameters": {
        "type": "object",
        "properties": {
          "action": {"type": "string", "enum": ["get_available_times"]},
          "date": {
            "type": "string", 
            "description": "Date in DD.MM.YYYY format or natural language (dnes, zajtra, pondelok, etc.)"
          },
          "time_period": {
            "type": "string",
            "enum": ["ráno", "dopoludnie", "poludnie", "popoludnie", "večer"],
            "description": "Optional time period filter"
          },
          "preferred_time": {
            "type": "string",
            "enum": ["morning", "afternoon"],
            "description": "Preferred time period for validation"
          },
          "previous_time": {
            "type": "string",
            "description": "Previous time shown to customer for follow-up requests"
          },
          "current_count": {
            "type": "number",
            "description": "Number of slots already shown for pagination"
          }
        },
        "required": ["action"]
      },
      "returns": {
        "response": "Slovak language response about availability",
        "success": "boolean",
        "availableTimes": "array of available slots",
        "hasMore": "boolean indicating if more slots exist",
        "isFollowUp": "boolean"
      }
    },

    {
      "name": "get_more_slots",
      "description": "Get additional available time slots beyond initially shown",
      "parameters": {
        "type": "object",
        "properties": {
          "action": {"type": "string", "enum": ["get_more_slots"]},
          "current_count": {"type": "number", "description": "Number of slots already displayed"},
          "date": {"type": "string", "description": "Date for additional slots"},
          "time_period": {"type": "string", "description": "Time period filter if applicable"}
        },
        "required": ["action", "current_count"]
      },
      "returns": {
        "response": "Slovak response with additional available times",
        "success": "boolean",
        "availableTimes": "array of additional time slots"
      }
    },

    {
      "name": "find_soonest_available", 
      "description": "Find the next available appointment across all dates",
      "parameters": {
        "type": "object",
        "properties": {
          "action": {"type": "string", "enum": ["get_soonest_available"]}
        },
        "required": ["action"]
      },
      "returns": {
        "response": "Slovak sentence with soonest appointment details",
        "success": "boolean",
        "appointment": "object with date and available slots"
      }
    },

    {
      "name": "find_earlier_times",
      "description": "Find earlier appointment times before a specified time",
      "parameters": {
        "type": "object", 
        "properties": {
          "action": {"type": "string", "enum": ["get_earlier_times"]},
          "date": {"type": "string", "description": "Date in DD.MM.YYYY format"},
          "requested_time": {"type": "string", "description": "Time in HH:MM format"}
        },
        "required": ["action", "date", "requested_time"]
      },
      "returns": {
        "response": "Slovak response about earlier available times",
        "success": "boolean",
        "availableTimes": "array of earlier time slots"
      }
    },

    {
      "name": "get_service_info",
      "description": "Get information about Refresh Studio services and facility",
      "parameters": {
        "type": "object",
        "properties": {
          "action": {"type": "string", "enum": ["get_services"]}
        },
        "required": ["action"]
      },
      "returns": {
        "response": "Slovak description of services and facility",
        "success": "boolean",
        "services": "array of service objects",
        "facility": "facility information object"
      }
    },

    {
      "name": "book_appointment",
      "description": "Create a new appointment booking with full validation",
      "parameters": {
        "type": "object",
        "properties": {
          "action": {"type": "string", "enum": ["book_appointment"]},
          "date": {"type": "string", "description": "Date in DD.MM.YYYY format"},
          "time": {"type": "string", "description": "Time in HH:MM format"},
          "date_time": {"type": "string", "description": "ISO format YYYY-MM-DDTHH:mm:ss for validation"},
          "patient_name": {"type": "string", "description": "Customer first name for validation"},
          "patient_surname": {"type": "string", "description": "Customer surname for validation"},
          "full_patient_name": {"type": "string", "description": "Full customer name for cross-validation"},
          "phone": {"type": "string", "description": "Phone number for verification - required"},
          "preferred_time": {"type": "string", "enum": ["morning", "afternoon"], "description": "Time preference for validation"},
          "appointment_type": {"type": "string", "description": "Service type: wellness_session, consultation, etc."},
          "customer": {
            "type": "object",
            "properties": {
              "firstName": {"type": "string"},
              "lastName": {"type": "string"}, 
              "email": {"type": "string"},
              "phone": {"type": "string"},
              "note": {"type": "string", "description": "Optional customer note"}
            },
            "required": ["firstName", "lastName", "phone"]
          }
        },
        "required": ["action", "date", "time", "date_time", "phone", "customer"]
      },
      "returns": {
        "response": "Slovak booking confirmation message",
        "success": "boolean", 
        "booking": "booking details object",
        "order": "order information object"
      }
    },

    {
      "name": "cancel_appointment",
      "description": "Cancel existing appointment with identity verification",
      "parameters": {
        "type": "object",
        "properties": {
          "action": {"type": "string", "enum": ["cancel_appointment"]},
          "phone": {"type": "string", "description": "Customer phone number for verification"},
          "full_patient_name": {"type": "string", "description": "Full customer name for verification"},
          "appointment_date": {"type": "string", "description": "Appointment date in YYYY-MM-DD format"},
          "patient_name": {"type": "string", "description": "Customer first name"},
          "patient_surname": {"type": "string", "description": "Customer surname"}
        },
        "required": ["action", "phone", "full_patient_name"]
      },
      "returns": {
        "response": "Slovak cancellation confirmation or instructions",
        "success": "boolean",
        "instructions": "cancellation process information"
      }
    },

    {
      "name": "reschedule_appointment",
      "description": "Reschedule existing appointment with validation",
      "parameters": {
        "type": "object",
        "properties": {
          "action": {"type": "string", "enum": ["reschedule_appointment"]},
          "phone": {"type": "string", "description": "Customer phone for verification"},
          "full_patient_name": {"type": "string", "description": "Full name for verification"},
          "old_date": {"type": "string", "description": "Original appointment date YYYY-MM-DD"},
          "old_time": {"type": "string", "description": "Original appointment time HH:MM"},
          "new_date": {"type": "string", "description": "New appointment date YYYY-MM-DD"},
          "new_time": {"type": "string", "description": "New appointment time HH:MM"},
          "new_date_time": {"type": "string", "description": "New appointment ISO format YYYY-MM-DDTHH:mm:ss"}
        },
        "required": ["action", "phone", "full_patient_name", "old_date", "old_time", "new_date", "new_time"]
      },
      "returns": {
        "response": "Slovak rescheduling confirmation message",
        "success": "boolean",
        "appointment": "updated appointment details"
      }
    }
  ],

  "conversation_flow": {
    "greeting_templates": [
      "Dobrý deň! Vítam vás v Refresh Studio. Môžem vám pomôcť s rezerváciou termínu?",
      "Ahoj! Som tu, aby som vám pomohol s rezerváciou termínu v Refresh Studio. Čo by ste potrebovali?",
      "Dobrý deň! Refresh Studio k vašim službám. Ako vám môžem pomôcť s rezerváciou?"
    ],
    
    "availability_responses": {
      "single_slot": "Dostupný je termín o {time}.",
      "multiple_slots": "Dostupné sú termíny o {time1} a {time2}.", 
      "no_availability": "Na {date} nie sú dostupné žiadne termíny.",
      "follow_up_available": "Mám ešte o {time}. Vyhovuje?",
      "follow_up_multiple": "Mám ešte o {time1} alebo {time2}. Vyhovuje niečo?"
    },

    "booking_responses": {
      "success": "Perfektne! Váš termín na {date} o {time} bol úspešne rezervovaný pre {customer}.",
      "validation_error": "Ľutujem, ale zadané údaje nie sú kompletné. {error_details}.",
      "slot_unavailable": "Ľutujem, ale zvolený termín už nie je dostupný.",
      "booking_failed": "Ľutujem, rezervácia sa nepodarila. {error_reason}.",
      "verification_needed": "Pre dokončenie rezervácie potrebujem vaše telefónne číslo.",
      "data_confirmation": "Skontrolujme údaje: {full_name}, telefón {phone}, termín {date} o {time}. Súhlasíte?",
      "duplicate_prevented": "Už máte rezervovaný termín na tento dátum. Chcete ho presunúť?",
      "slot_double_check": "Overujem dostupnosť termínu pred rezerváciou..."
    },

    "validation_responses": {
      "phone_invalid": "Prosím, zadajte platné slovenské telefónne číslo (+421XXXXXXXXX).",
      "name_mismatch": "Meno a priezvisko sa nezhodujú. Prosím, skontrolujte údaje.",
      "missing_required": "Pre rezerváciu potrebujem: {missing_fields}.",
      "appointment_conflict": "Na tento čas už máte rezervovaný termín. Ponúknem alternatívu.",
      "date_invalid": "Dátum musí byť v budúcnosti. Prosím, vyberte iný dátum."
    },

    "error_responses": {
      "invalid_date": "Neplatný formát dátumu. Použite DD.MM.YYYY alebo 'dnes', 'zajtra', 'pondelok', atď.",
      "past_date": "Nemôžem rezervovať termín v minulosti. Prosím, vyberte dátum od dneška.",
      "technical_error": "Ľutujem, vyskytla sa technická chyba. Skúste to prosím neskôr."
    }
  },

  "natural_language_processing": {
    "date_parsing": {
      "today": ["dnes", "today"],
      "tomorrow": ["zajtra", "tomorrow"], 
      "next_week": ["budúci týždeň", "next week"],
      "weekdays": {
        "monday": ["pondelok", "monday"],
        "tuesday": ["utorok", "tuesday"],
        "wednesday": ["streda", "wednesday"], 
        "thursday": ["štvrtok", "thursday"],
        "friday": ["piatok", "friday"],
        "saturday": ["sobota", "saturday"],
        "sunday": ["nedeľa", "sunday"]
      }
    },
    
    "time_periods": {
      "morning": ["ráno", "dopoludnie", "morning"],
      "noon": ["poludnie", "noon"],
      "afternoon": ["popoludnie", "afternoon"], 
      "evening": ["večer", "evening"]
    },

    "intent_recognition": {
      "booking_intent": ["rezervovať", "objednať", "book", "schedule"],
      "inquiry_intent": ["dostupný", "voľný", "available", "free"],
      "cancellation_intent": ["zrušiť", "storno", "cancel"],
      "information_intent": ["informácie", "služby", "info", "services"]
    }
  },

  "business_rules": {
    "facility_info": {
      "name": "Refresh Studio",
      "address": "Ihrisková 4, Bratislava-Rača", 
      "service_duration": "10 minút",
      "description": "Wellness a relaxačné centrum s profesionálnymi službami"
    },

    "booking_constraints": {
      "advance_booking_days": 30,
      "min_advance_hours": 1,
      "max_slots_shown": 3,
      "default_service_id": 130113,
      "default_worker_id": 31576
    },

    "validation_rules": {
      "phone_pattern": "^\\+421[0-9]{9}$",
      "required_fields": ["firstName", "lastName", "phone"],
      "date_formats": ["DD.MM.YYYY", "YYYY-MM-DD", "YYYY-MM-DDTHH:mm:ss"],
      "max_bookings_per_customer": 3,
      "duplicate_booking_window_hours": 2,
      "identity_verification": ["phone", "full_name"],
      "appointment_types": ["wellness_session", "consultation", "relaxation_treatment"]
    },

    "booking_integrity": {
      "pre_validation_required": true,
      "real_time_availability_check": true,
      "customer_conflict_prevention": true,
      "double_booking_prevention": true,
      "slot_timeout_minutes": 10
    },

    "response_formatting": {
      "time_format": "12:30 dopoludnia",
      "date_format": "18. augusta 2025", 
      "currency": "EUR",
      "phone_format": "+421 XXX XXX XXX"
    }
  },

  "integration_settings": {
    "primary_endpoint": "https://your-domain.com/api/booking/webhook/elevenlabs-unified",
    "webhook_timeout": 30,
    "retry_attempts": 3,
    "rate_limiting": {
      "requests_per_minute": 60,
      "burst_limit": 10
    },
    
    "logging": {
      "log_level": "info",
      "log_customer_details": false,
      "log_booking_attempts": true
    }
  },

  "voice_ai_optimizations": {
    "response_length": "concise",
    "confirmation_required": true,
    "repeat_important_info": true,
    "use_natural_pauses": true,
    "pronunciation_guides": {
      "Refresh Studio": "Refresh Studio",
      "Ihrisková": "Ihrisková",
      "Bratislava-Rača": "Bratislava-Rača"
    }
  }
}